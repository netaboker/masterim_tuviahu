<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”×××¡×˜×¨×™× ×©×œ ×˜×•×‘×™×”×• - ×§×”×™×œ×” ×©×™×ª×•×¤×™×ª</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1; /* ×¡×’×•×œ ××•×“×¨× ×™ */
            --secondary: #ec4899; /* ×•×¨×•×“ ××•××—×™× */
            --dark: #1e293b;
            --bg: #f1f5f9;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Assistant', sans-serif;
            margin: 0; background: var(--bg); color: var(--dark);
            line-height: 1.5; overflow-x: hidden;
        }

        /* --- Header & Nav --- */
        header {
            background: white; padding: 10px 20px; border-bottom: 2px solid #e2e8f0;
            position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }
        .header-main { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; width: 100%; }
        .logo { display: flex; align-items: center; gap: 10px; cursor: pointer; font-weight: 800; font-size: 1.4rem; color: var(--primary); }
        
        nav { display: flex; gap: 10px; overflow-x: auto; padding: 10px 0; max-width: 1200px; margin: 0 auto; scrollbar-width: none; }
        nav::-webkit-scrollbar { display: none; }
        nav a { 
            text-decoration: none; color: var(--dark); font-weight: 600; padding: 8px 16px; 
            border-radius: 50px; white-space: nowrap; font-size: 0.95rem; transition: 0.3s;
            background: #f8fafc; border: 1px solid #e2e8f0;
        }
        nav a.active { background: var(--primary); color: white; border-color: var(--primary); }
        nav a.expert-nav.active { background: var(--secondary); border-color: var(--secondary); }

        /* --- UI Components --- */
        .container { padding: 20px; max-width: 1200px; margin: 0 auto; }
        .page { display: none; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .hero { 
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); 
            padding: 40px 20px; border-radius: 24px; color: white; text-align: center; margin-bottom: 30px;
            box-shadow: 0 20px 25px -5px rgba(99, 102, 241, 0.3);
        }

        /* --- Cards Grid --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .card { 
            background: white; border-radius: 20px; padding: 20px; position: relative;
            box-shadow: var(--card-shadow); border: 1px solid #f1f5f9; transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-5px); }
        .card-tag { 
            position: absolute; top: 15px; left: 15px; padding: 4px 12px; 
            border-radius: 50px; font-size: 0.75rem; font-weight: 700; 
        }
        .tag-help { background: #e0e7ff; color: var(--primary); }
        .tag-expert { background: #fdf2f8; color: var(--secondary); }

        .btn { 
            width: 100%; border: none; padding: 12px; border-radius: 12px; 
            font-weight: 700; cursor: pointer; transition: 0.2s; font-family: inherit; font-size: 1rem;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: var(--secondary); color: white; }
        .btn-outline { background: transparent; border: 2px solid #e2e8f0; color: var(--dark); margin-top: 10px; }

        /* --- Forms --- */
        .form-card { background: white; padding: 30px; border-radius: 24px; max-width: 600px; margin: 0 auto; box-shadow: var(--card-shadow); }
        input, select, textarea { 
            width: 100%; padding: 14px; border: 2px solid #f1f5f9; border-radius: 12px; 
            margin-bottom: 15px; font-family: inherit; font-size: 1rem; box-sizing: border-box;
        }
        label { font-weight: 700; display: block; margin-bottom: 5px; }

        /* --- Modal --- */
        .modal { 
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); 
            z-index: 2000; align-items: flex-end; justify-content: center;
        }
        .modal-content { background: white; width: 100%; padding: 30px; border-radius: 30px 30px 0 0; max-width: 500px; }

        /* Mobile specific adjustments */
        @media (min-width: 768px) {
            .modal { align-items: center; }
            .modal-content { border-radius: 24px; }
        }

        #login-screen { height: 100vh; display: flex; align-items: center; justify-content: center; background: var(--primary); padding: 20px; }
    </style>
</head>
<body onload="checkLoginStatus()">

    <section id="login-screen">
        <div class="form-card" style="text-align: center; width: 100%;">
            <span style="font-size: 4rem;">ğŸ‘‘</span>
            <h1 style="margin: 10px 0;">×”×××¡×˜×¨×™× ×©×œ ×˜×•×‘×™×”×•</h1>
            <p style="color: #64748b; margin-bottom: 30px;">×”×ª×—×‘×¨×• ×›×“×™ ×œ×”×ª×—×™×œ ×œ×¢×–×•×¨ ×•×œ×”×™×¢×–×¨</p>
            <input type="email" id="userEmail" placeholder="name@school.edu.il">
            <button class="btn btn-primary" onclick="initApp()">×›× ×™×¡×” ×œ×§×”×™×œ×”</button>
        </div>
    </section>

    <div id="app">
        <header>
            <div class="header-main">
                <div class="logo" onclick="showPage('dashboard')">ğŸ‘‘ ×”×××¡×˜×¨×™×</div>
                <div id="user-badge" style="background: #f1f5f9; padding: 5px 15px; border-radius: 50px; display: flex; align-items: center; gap: 10px;">
                    <span id="display-name" style="font-weight: 700; font-size: 0.9rem;"></span>
                    <button onclick="logout()" style="border:none; background:none; cursor:pointer; font-size:1.1rem">ğŸšª</button>
                </div>
            </div>
        </header>
        
        <nav id="main-nav">
            <a onclick="showPage('dashboard')" id="nav-dashboard" class="active">×œ×•×— ×‘×§×©×•×ª ğŸ¤</a>
            <a onclick="showPage('experts')" id="nav-experts" class="expert-nav">×œ×•×— ××•××—×™× ğŸ“</a>
            <a onclick="showPage('new-request')" id="nav-new-request">×‘×§×©×” ×—×“×©×” +</a>
            <a onclick="showPage('new-expert')" id="nav-new-expert">×¤×¨×¡×•× ××•××—×™×•×ª ğŸŒŸ</a>
            <a onclick="showPage('admin')" id="nav-admin" style="color: var(--danger);">×¤×× ×œ × ×™×”×•×œ ğŸ› ï¸</a>
        </nav>

        <div class="container">
            
            <div id="page-dashboard" class="page active">
                <div class="hero">
                    <h2>×¦×¨×™×›×™× ×¢×–×¨×” ×‘××©×”×•?</h2>
                    <p>×¦×¤×• ×‘×‘×§×©×•×ª ×©×œ ×—×‘×¨×™× ×•×’×œ×• ××™×¤×” ××ª× ×™×›×•×œ×™× ×œ×ª×ª ×™×“.</p>
                </div>
                <div id="request-grid" class="grid"></div>
            </div>

            <div id="page-experts" class="page">
                <div class="hero" style="background: linear-gradient(135deg, #ec4899 0%, #f43f5e 100%);">
                    <h2>× ×‘×—×¨×ª ×”××•××—×™× ×©×œ× ×•</h2>
                    <p>×ª×œ××™×“×™× ×©××•×›× ×™× ×œ×—×œ×•×§ ××”×™×“×¢ ×©×œ×”×. ××œ ×ª×”×¡×¡×• ×œ×¤× ×•×ª!</p>
                </div>
                <div id="expert-grid" class="grid"></div>
            </div>

            <div id="page-new-request" class="page">
                <div class="form-card">
                    <h2>××” ×”×¦×•×¨×š ×©×œ×š?</h2>
                    <label>×›×•×ª×¨×ª ×§×¦×¨×”</label>
                    <input type="text" id="req-title" placeholder="×œ××©×œ: ×¢×–×¨×” ×‘××ª××˜×™×§×” ×™×—×™×“×” 4">
                    <label>×¡×•×’ ×”×‘×§×©×”</label>
                    <select id="req-type">
                        <option>×œ×™××•×“×™</option>
                        <option>×˜×›× ×™/×œ×•×’×™×¡×˜×™</option>
                        <option>×—×‘×¨×ª×™/×¢×™×¦×•×‘×™</option>
                    </select>
                    <label>×ª×™××•×¨ ××¤×•×¨×˜</label>
                    <textarea id="req-desc" rows="4" placeholder="×¤×¨×˜×• ×›××Ÿ ××” ×‘×“×™×•×§ ××ª× ×¦×¨×™×›×™×..."></textarea>
                    <button class="btn btn-primary" onclick="publishRequest()">×¤×¨×¡× ×‘×§×©×”</button>
                </div>
            </div>

            <div id="page-new-expert" class="page">
                <div class="form-card">
                    <h2 style="color: var(--secondary);">×‘××” ××ª× ×××¡×˜×¨×™×?</h2>
                    <label>×ª×—×•× ×”××•××—×™×•×ª</label>
                    <input type="text" id="exp-title" placeholder="×œ××©×œ: ×¢×™×¦×•×‘ ×‘-Canva, ×’×™×˜×¨×”, ×× ×’×œ×™×ª">
                    <label>×›××” ××™×œ×™× ×¢×œ ×”×™×“×¢ ×©×œ×›×</label>
                    <textarea id="exp-desc" rows="4" placeholder="×›×ª×‘×• ××™×š ×ª×•×›×œ×• ×œ×¢×–×•×¨ ×œ××—×¨×™×..."></textarea>
                    <button class="btn btn-secondary" onclick="publishExpert()">×¤×¨×¡× ×›×¨×˜×™×¡ ××•××—×”</button>
                </div>
            </div>

            <div id="page-admin" class="page">
                <h2>× ×™×”×•×œ ×‘×§×©×•×ª ×•××™×©×•×¨×™×</h2>
                <div id="admin-list" class="grid"></div>
            </div>

        </div>
    </div>

    <div id="volunteer-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title">×× ×™ ×¨×•×¦×” ×œ×¢×–×•×¨!</h3>
            <label>×”×©× ×”××œ× ×©×œ×š</label>
            <input type="text" id="vol-name">
            <label>××ª×™ × ×•×— ×œ×š ×œ×“×‘×¨/×œ×”×™×¤×’×©?</label>
            <textarea id="vol-info" rows="3"></textarea>
            <button class="btn btn-primary" onclick="submitMatch()">×©×œ×— ×‘×§×©×ª ×××¥'</button>
            <button class="btn btn-outline" onclick="closeModal()">×‘×™×˜×•×œ</button>
        </div>
    </div>

    <script>
        let data = {
            requests: [
                { id: 1, title: "×¢×–×¨×” ×‘××©×•×•××•×ª", desc: "××—×¤×© ××™×©×”×• ×©×™×¡×‘×™×¨ ×œ×™ × ×•×©× ×©×œ ××©×•×•××•×ª ×¨×™×‘×•×¢×™×•×ª ×œ×¤× ×™ ×”××‘×—×Ÿ", name: "×™×•×¡×™", status: "open", type: "×œ×™××•×“×™" },
                { id: 2, title: "×”×¢×‘×¨×ª ×›×™×¡××•×ª", desc: "×¦×¨×™×š ×¢×–×¨×” ×‘×œ×”×¢×‘×™×¨ ×›×™×¡××•×ª ×œ××•×œ× ×”×¡×¤×•×¨×˜ ×œ×§×¨××ª ×”×˜×§×¡", name: "××‘ ×”×‘×™×ª", status: "open", type: "×˜×›× ×™" }
            ],
            experts: [
                { id: 101, title: "×××¡×˜×¨ ×‘×§× ×‘×”", desc: "×‘×•× ×” ××¦×’×•×ª ×•×›×¨×–×•×ª ×‘×¨××” ×’×‘×•×”×” ×××•×“", name: "× ×•×¢×”", type: "×—×‘×¨×ª×™" }
            ],
            matches: []
        };

        let currentTargetId = null;
        let currentTargetType = null; // 'request' or 'expert'

        function checkLoginStatus() {
            const user = localStorage.getItem('masterUser');
            if (user) loginSuccess(user);
        }

        function initApp() {
            const email = document.getElementById('userEmail').value;
            if (email.includes('@')) {
                localStorage.setItem('masterUser', email);
                loginSuccess(email);
            }
        }

        function loginSuccess(email) {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            document.getElementById('display-name').innerText = email.split('@')[0];
            renderAll();
        }

        function logout() {
            localStorage.removeItem('masterUser');
            location.reload();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            document.getElementById('nav-' + pageId).classList.add('active');
            window.scrollTo(0,0);
        }

        function renderAll() {
            renderDashboard();
            renderExperts();
            renderAdmin();
        }

        function renderDashboard() {
            const grid = document.getElementById('request-grid');
            grid.innerHTML = data.requests.filter(r => r.status === 'open').map(r => `
                <div class="card">
                    <span class="card-tag tag-help">${r.type}</span>
                    <h3 style="margin-top:25px">${r.title}</h3>
                    <p style="color:#64748b">${r.desc}</p>
                    <div style="font-weight:700; font-size:0.8rem; margin-bottom:15px">×¤×•×¨×¡× ×¢×œ ×™×“×™: ${r.name}</div>
                    <button class="btn btn-primary" onclick="openModal(${r.id}, 'request', '${r.title}')">×× ×™ ×¨×•×¦×” ×œ×¢×–×•×¨</button>
                </div>
            `).join('');
        }

        function renderExperts() {
            const grid = document.getElementById('expert-grid');
            grid.innerHTML = data.experts.map(e => `
                <div class="card">
                    <span class="card-tag tag-expert">××•××—×”</span>
                    <h3 style="margin-top:25px">${e.title}</h3>
                    <p style="color:#64748b">${e.desc}</p>
                    <div style="font-weight:700; font-size:0.8rem; margin-bottom:15px">×”××•××—×”: ${e.name}</div>
                    <button class="btn btn-secondary" onclick="openModal(${e.id}, 'expert', '${e.name}')">×‘×§×©×ª ×¢×–×¨×” ×××•××—×”</button>
                </div>
            `).join('');
        }

        function openModal(id, type, title) {
            currentTargetId = id;
            currentTargetType = type;
            document.getElementById('modal-title').innerText = type === 'request' ? `×¢×–×¨×” ×‘: ${title}` : `×¤× ×™×™×” ×œ××•××—×”: ${title}`;
            document.getElementById('volunteer-modal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('volunteer-modal').style.display = 'none'; }

        function submitMatch() {
            const volName = document.getElementById('vol-name').value;
            const volInfo = document.getElementById('vol-info').value;
            
            if(!volName) return alert("× × ×œ××œ× ×©×");

            data.matches.push({
                id: Date.now(),
                targetId: currentTargetId,
                type: currentTargetType,
                volName,
                volInfo,
                status: 'pending'
            });

            if(currentTargetType === 'request') {
                const req = data.requests.find(r => r.id === currentTargetId);
                req.status = 'in-progress';
            }

            alert("×”×‘×§×©×” × ×©×œ×—×” ×œ××™×©×•×¨ ×”×× ×”×œ×ª!");
            closeModal();
            renderAll();
            showPage('dashboard');
        }

        function renderAdmin() {
            const grid = document.getElementById('admin-list');
            const pendingMatches = data.matches.filter(m => m.status === 'pending');
            
            grid.innerHTML = pendingMatches.length === 0 ? '<p>××™×Ÿ ×‘×§×©×•×ª ×”×××ª×™× ×•×ª ×œ××™×©×•×¨.</p>' : pendingMatches.map(m => {
                const target = m.type === 'request' ? data.requests.find(r => r.id === m.targetId) : data.experts.find(e => e.id === m.targetId);
                return `
                    <div class="card" style="border-right: 5px solid var(--warning)">
                        <h4>×‘×§×©×ª ×—×™×‘×•×¨ (Match)</h4>
                        <p><strong>×‘×™×Ÿ:</strong> ${m.volName}</p>
                        <p><strong>×œ×‘×™×Ÿ:</strong> ${target.name} (${target.title})</p>
                        <p><strong>×¤×¨×˜×™×:</strong> ${m.volInfo}</p>
                        <div style="display:flex; gap:10px">
                            <button class="btn btn-primary" style="background:var(--success)" onclick="approveMatch(${m.id})">××©×¨</button>
                            <button class="btn btn-outline" style="color:var(--danger)" onclick="rejectMatch(${m.id})">×“×—×”</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function approveMatch(id) {
            const m = data.matches.find(match => match.id === id);
            m.status = 'approved';
            alert("×”×××¥' ××•×©×¨! ×”×•×“×¢×” × ×©×œ×—×” ×œ××©×ª×ª×¤×™×.");
            renderAll();
        }

        function publishRequest() {
            const title = document.getElementById('req-title').value;
            const desc = document.getElementById('req-desc').value;
            const type = document.getElementById('req-type').value;
            if(!title) return;
            data.requests.unshift({ id: Date.now(), title, desc, type, name: document.getElementById('display-name').innerText, status: 'open' });
            showPage('dashboard');
            renderAll();
        }

        function publishExpert() {
            const title = document.getElementById('exp-title').value;
            const desc = document.getElementById('exp-desc').value;
            if(!title) return;
            data.experts.unshift({ id: Date.now(), title, desc, name: document.getElementById('display-name').innerText });
            showPage('experts');
            renderAll();
        }
    </script>
</body>
</html>
